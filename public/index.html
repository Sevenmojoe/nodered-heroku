<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node-RED in Heroku</title>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700,300,100' rel='stylesheet' type='text/css'>
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <link href="css/simplegrid.css" rel="stylesheet" media="screen">
    <link href="css/style.css" rel="stylesheet" media="screen">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body>
    <div class="header">
        <div class="header-content">
            <a href="/"><img class="logo" src="images/node-red.png" />Node-RED in Heroku</a>
        </div>
    </div>
    <!-- Grid 1 -->
    <div class="title">
        <div class="grid">
            <div class="col-1-1">
                <div class="content">
                    <h1>Node-RED in Heroku</h1>
                    <h2>A visual tool for wiring the Internet of Things</h2>
                    <img src="images/node-red-title-flow.png" />
                </div>
            </div>
        </div>
    </div>
    <!-- Grid 1/2 -->
    <div class="row2">
        <div class="grid">
            <div class="col-1-2">
                <div class="content blurb">
                    <p>Node-RED provides a browser-based editor that makes it easy to wire together flows that can be
                        deployed to the runtime in a single-click.</p>
                    <p>The version running here has been customised for Heroku.</p>
                    <p>More information about Node-RED, including documentation, can be found at <a
                            href="http://nodered.org">nodered.org</a>.</p>
                </div>
            </div>
            <div class="col-1-2">
                <div class="content blurb">
                    <p style="text-align: center"><a style="width:300px;" class="button1" href="editor/">Node-RED flow
                            editor</a></p>
                    <p style="text-align: center"><a style="width:300px;" class="button2" href="ui/">Node-RED
                            dashboard</a></p>
                    <p class="insecure hide" style="text-align: center"><a href="#password-protecting">How to
                            password-protect your instance</a></p>
                    <p style="text-align: center"><a href="#custom">How to customise Node-RED</a></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Grid 2/2 -->
    <div class="row3">
        <div class="grid">
            <div class="col-1-1">
                <div class="content blurb">
                    <h2 id="custom">Customising the Node-RED instance</h2>
                    <p>This template instance of Node-RED is enough to get you started creating flows.
                    <p>
                    <p>You may want to customise it for your needs,
                        for example replacing this introduction page with your own, adding http authentication to the
                        flow editor or adding new nodes to
                        the palette.</p>
                    <p style="clear:both"></p>
                    <h3 id="password-protecting">Password protect the flow editor</h3>
                    <p>By default, the editor is open for anyone to access and modify flows. To password-protect the
                        editor:</p>
                    <p>Add the following user-defined variables.</p>
                    <ul>
                        <li><code>NODE_RED_USERNAME</code> - the username to secure the editor with</li>
                        <li><code>NODE_RED_PASSWORD</code> - the password to secure the editor with</li>
                    </ul>
                    <h3>Adding new nodes to the palette</h3>
                    <ul>
                        <li>There is a growing collection of additional nodes that can be added to the Node-RED editor.
                            You can search for available nodes in the <a target="_blank"
                                href="http://flows.nodered.org">Node-RED library</a>.</li>
                        <li>The required node package are added in the file <code>package.json</code> to the
                            <code>dependencies</code> section. The format is:
                            <pre>"node-red-<i>package-name</i>":"x.y.x"</pre> where <code>x.y.z</code> is the desired
                            version number.
                        </li>
                        <li>
                            <strong>See next section to save the added nodes.</strong>
                        </li>
                    </ul>
                    <h3>Saving deployed flows and installed nodes</h3>
                    <ul>
                        <li>Heroku doesn't automatically save flows, credentials and installed nodes, so they may be
                            lost when dynos are restarted. To overcome this, changes must be pushed to GitHub so as
                            Node-RED is rebuilt correctly with the changed files when Heroku restarts.</li>
                        <li>To do this, use the <code>SAVE</code> Inject node in the first Flow to push
                            <code>flows.json</code>, <code>flows_cred.json</code> and <code>package.json</code> to
                            GitHub, after new flows are deployed and/or new nodes installed into the Palette.
                        </li>
                        <img src="images/save-button.png" />
                    </ul>
                    <h3>Upgrading the version of Node-RED</h3>
                    <ul>
                        <li>This boilerplate is configured to grab the latest stable release of Node-RED whenever the
                            application is pushed into Heroku.</li>
                    </ul>
                    <h3>Changing the static web content</h3>
                    <ul>
                        <li>The page you are reading now is served as static content from the application. This can be
                            replaced with whatever content you want in the <code>public</code> directory.</li>
                    </ul>
                    <h3>Remove static web content and serve the flow editor from the root path</h3>
                    <ul>
                        <li>In the file <code>settings.js</code>, delete the <code>httpStatic</code> and
                            <code>httpAdminRoot</code> entries.
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="grid">
            <div class="content">
                <div class="ets-link"><a href="http://ibm.com/blogs/et">Node-RED is a creation of IBM Emerging
                        Technology</a></div>
                <div class="ets-link"><a href="http://ibm.com/blogs/et"><img class="ets-globe"
                            src="images/ets-globe.png" /> </a></div>
            </div>
        </div>
    </div>
    <script>
        $(function () {
            $(".insecure").hide();
            $.ajax({
                dataType: "json",
                url: "/editor/settings",
                success: function () {
                    $(".insecure").show();
                },
                error: function (jqXHR, textStatus, errorThrown) { }
            });
        });
    </script>
</body>

</html>